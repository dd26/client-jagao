(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[21],{"0dec":function(t,e,o){"use strict";o("b889")},"7eb0":function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("q-page",[o("div",{staticClass:"row q-px-md q-pt-md"},[o("q-btn",{attrs:{dense:"",flat:"",size:"11px",icon:"img:vectors/back1.svg"},on:{click:function(e){return t.$router.go(-1)}}}),o("q-space"),o("q-btn",{attrs:{dense:"",flat:"",round:"",size:"15px",icon:"img:vectors/tools1.svg"}})],1),o("div",{staticClass:"text-center text-primary",staticStyle:{"font-size":"25px","font-weight":"700"}},[t._v("Add an Address")]),o("section",{staticClass:"q-pa-lg"},[o("img",{attrs:{src:"vectors/illustration1.svg"}})]),o("section",{staticClass:"row q-pa-md q-px-lg"},[o("div",{staticClass:"col-12 row q-pt-md"},[o("div",{staticClass:"col-12 q-pb-sm"},[t._v("Name")]),o("q-input",{staticClass:"col-12",attrs:{dense:"","bg-color":"grey-3",placeholder:"Mom’s House",outlined:"",error:t.$v.form.name.$error},on:{blur:function(e){return t.$v.form.name.$touch()}},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),o("div",{staticClass:"col-12 row q-pt-md"},[o("div",{staticClass:"col-12 q-pb-sm"},[t._v("City / Town")]),o("q-select",{staticClass:"col-12",attrs:{dense:"",options:t.cities,"bg-color":"grey-3",placeholder:"1234 5678 9101 1112",outlined:"","option-label":"name","option-value":"id","map-options":"","emit-value":"",error:t.$v.form.city_id.$error},on:{blur:function(e){return t.$v.form.city_id.$touch()}},model:{value:t.form.city_id,callback:function(e){t.$set(t.form,"city_id",e)},expression:"form.city_id"}})],1),o("div",{staticClass:"col-12 row justify-between"},[o("div",{staticClass:"col-12 row q-pt-md"},[o("div",{staticClass:"col-12 q-pb-sm"},[t._v("Address")]),o("q-input",{staticClass:"col-12",attrs:{dense:"","bg-color":"grey-3",placeholder:"Your Adress #1-02",outlined:"",type:"textarea",error:t.$v.form.address.$error},on:{blur:function(e){return t.$v.form.address.$touch()}},model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1)]),o("div",{staticClass:"col-12 row q-pt-md"},[o("div",{staticClass:"col-12 q-pb-sm"},[t._v("Zip / Postal code")]),o("q-input",{staticClass:"col-12",attrs:{dense:"","bg-color":"grey-3",placeholder:"12345",outlined:"",error:t.$v.form.postalCode.$error},on:{blur:function(e){return t.$v.form.postalCode.$touch()}},model:{value:t.form.postalCode,callback:function(e){t.$set(t.form,"postalCode",e)},expression:"form.postalCode"}})],1),o("div",{staticClass:"col-12 row q-pt-md"},[o("div",{staticClass:"col-12"},[t._v("Upload an image (Optional)")]),o("q-file",{staticClass:"col-12 q-pt-xs",attrs:{outlined:"",dense:"",label:"click here to upload an image",accept:"image/*","bg-color":"grey-3"},model:{value:t.addressImage,callback:function(e){t.addressImage=e},expression:"addressImage"}})],1),o("div",{staticClass:"col-12 q-pt-md"},[o("p",[o("span",{staticClass:"text-primary"},[t._v("Note:")]),t._v(" You must select your address on the map\n      ")]),o("q-btn",{attrs:{icon:"place",label:t.coordinates?"Change Location":"Select Location",color:"primary",outline:null!==t.coordinates},on:{click:function(e){t.showMapDlg=!0}}})],1),o("q-dialog",{attrs:{persistent:"",maximized:"","full-screen":""},model:{value:t.showMapDlg,callback:function(e){t.showMapDlg=e},expression:"showMapDlg"}},[o("q-card",{staticClass:"bg-white"},[o("q-btn",{staticStyle:{position:"absolute",top:"10px",right:"10px","z-index":"9999"},attrs:{color:"negative",icon:"close"},on:{click:function(e){t.showMapDlg=!1,t.coordinates=null}}}),o("GoogleMapView",{model:{value:t.coordinates,callback:function(e){t.coordinates=e},expression:"coordinates"}}),o("q-btn",{staticStyle:{position:"absolute",bottom:"25px",right:"10px","z-index":"9999"},attrs:{color:"primary",icon:"check",label:"Confirm Location"},on:{click:function(e){t.showMapDlg=!1}}})],1)],1),o("div",{staticClass:"col-12 row justify-center q-pt-lg"},[o("q-btn",{attrs:{dense:"",color:"primary",icon:"add",round:"",size:"xl"},on:{click:t.save}})],1)],1)])},s=[],i=o("9424"),r=o("b5ae"),n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("GmapMap",{ref:"mapRef",staticStyle:{width:"100%",height:"100%","border-radius":"12px"},attrs:{center:t.centerC,zoom:20,options:t.mapOptions},on:{"gmap-click":t.onMapClick}},t._l(t.markers,(function(e,a){return o("GmapMarker",{key:a,attrs:{position:e.position,clickable:!0,draggable:!0},on:{click:function(o){t.centerC=e.position},dragend:function(e){return t.onMarkerDragEnd(a,e)}}})})),1)},l=[],c=o("755e"),d={props:["center","value"],computed:{google:c["gmapApi"]},data(){return{centerC:{lat:10.18422090935222,lng:-67.97418734919233},gmapReady:!1,markers:[],travelMode:"DRIVING",mapOptions:{mapTypeControl:!1,zoomControl:!1,streetViewControl:!1,fullscreenControl:!1,gestureHandling:"cooperative"}}},methods:{getCurrentLocation(){"geolocation"in navigator?navigator.geolocation.getCurrentPosition((t=>{this.centerC={lat:t.coords.latitude,lng:t.coords.longitude},this.markers=[{title:"Mi ubicacion",position:this.centerC}],this.$emit("input",this.markers[0].position)}),(t=>{alert("Error al obtener la ubicación: "+t.message)}),{enableHighAccuracy:!0}):alert("Geolocation no está disponible en tu dispositivo.")},onMapClick(t){this.markers[0].position=t.latLng,this.$emit("input",{lat:t.latLng.lat(),lng:t.latLng.lng()})},onMarkerDragEnd(t,e){this.markers[t].position=e.latLng,this.$emit("input",{lat:e.latLng.lat(),lng:e.latLng.lng()})}},mounted(){this.$refs.mapRef.$mapPromise.then((()=>{this.value&&this.value.lat&&this.value.lng?(this.centerC=this.value,this.markers=[{title:"Mi ubicacion",position:this.centerC}]):this.getCurrentLocation()}))}},u=d,p=o("2877"),m=Object(p["a"])(u,n,l,!1,null,null,null),g=m.exports,f={mixins:[i["a"]],components:{GoogleMapView:g},data(){return{form:{name:null,city_id:null,address:null,postalCode:null,latitude:null,longitude:null},route:"addresses",formData:!0,cities:[],addressImage:null,showMapDlg:!1,coordinates:null}},mounted(){this.getCities()},methods:{beforeValidate(){this.addressImage&&(this.form.image=this.addressImage,this.form.latitude=this.coordinates.lat,this.form.longitude=this.coordinates.lng)},afterSave(){this.$router.push("/success?message=You successfully added an address!")},async getCities(){const t=await this.$api.get("cities");this.cities=t}},validations:{form:{name:{required:r["required"]},city_id:{required:r["required"]},address:{required:r["required"]},postalCode:{required:r["required"]},latitude:{required:r["required"]},longitude:{required:r["required"]}},coordinates:{required:r["required"]}}},h=f,v=(o("0dec"),o("9989")),b=o("9c40"),C=o("2c91"),q=o("27f9"),k=o("ddd8"),y=o("7d53"),w=o("24e8"),$=o("f09f"),x=o("823b"),_=o("eebe"),M=o.n(_),D=Object(p["a"])(h,a,s,!1,null,"174ec470",null);e["default"]=D.exports;M()(D,"components",{QPage:v["a"],QBtn:b["a"],QSpace:C["a"],QInput:q["a"],QSelect:k["a"],QFile:y["a"],QDialog:w["a"],QCard:$["a"],QTabPanel:x["a"]})},b889:function(t,e,o){}}]);