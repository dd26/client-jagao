(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[25],{"04a9":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-page",[s("div",{staticClass:"row q-pt-md q-px-md"},[s("q-btn",{attrs:{to:"/home",dense:"",flat:"",size:"11px",icon:"img:vectors/back1.svg"}}),s("q-space"),s("q-btn",{attrs:{dense:"",flat:"",round:"",size:"15px",icon:"img:vectors/tools1.svg"}})],1),s("div",{staticClass:"text-center text-primary",staticStyle:{"font-size":"25px","font-weight":"700"}},[e._v("Add a card")]),s("section",{staticClass:"q-pa-lg"},[s("q-card",{staticClass:"column card-style"},[s("div",{staticClass:"col-7 row",staticStyle:{position:"relative"}},[s("img",{staticClass:"img-card",attrs:{src:"vectors/card3.svg",height:"100%"}}),s("div",{staticClass:"blur-bg text-white"},[e._v("\n          Cards\n        ")])]),s("div",{staticClass:"col-5 q-pa-md"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12",staticStyle:{"font-weight":"400","font-size":"20px"}},[e._v(" "+e._s(e.spacedCardNumber?e.spacedCardNumber:"**** **** **** ****")+" ")]),s("div",{staticClass:"col-12",staticStyle:{"font-weight":"400","font-size":"20px"}},[e._v(" "+e._s(e.form.expiredDate?e.form.expiredDate:"**/**")+" ")])])])])],1),s("section",{staticClass:"row q-pa-md q-px-lg"},[s("div",{staticClass:"text-primary",staticStyle:{"font-weight":"700","font-size":"20px"}},[e._v("Card Details")]),s("div",{staticClass:"col-12 row q-pt-md"},[s("div",{staticClass:"col-12 q-pb-sm"},[e._v("Name on card")]),s("q-input",{staticClass:"col-12",attrs:{dense:"","bg-color":"grey-3",placeholder:"Name on card",outlined:"",error:e.$v.form.name.$error},on:{blur:function(t){return e.$v.form.name.$touch()}},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),s("div",{staticClass:"col-12 row q-pt-md"},[s("div",{staticClass:"col-12 q-pb-sm"},[e._v("Card number")]),s("q-input",{staticClass:"col-12",attrs:{dense:"","bg-color":"grey-3",maxlength:"19","unmasked-value":"",mask:"#### #### #### ####",placeholder:"1234 5678 9101 1112",outlined:"",error:e.$v.form.cardNumber.$error},on:{blur:function(t){return e.$v.form.cardNumber.$touch()}},model:{value:e.form.cardNumber,callback:function(t){e.$set(e.form,"cardNumber",t)},expression:"form.cardNumber"}})],1),s("div",{staticClass:"col-12 row justify-between"},[s("div",{staticClass:"col-5 row q-pt-md"},[s("div",{staticClass:"col-12 q-pb-sm"},[e._v("Expiry date")]),s("q-input",{staticClass:"col-12",attrs:{dense:"","bg-color":"grey-3",placeholder:"12/34",outlined:"",error:e.$v.form.expiredDate.$error},on:{blur:function(t){return e.$v.form.expiredDate.$touch()}},model:{value:e.form.expiredDate,callback:function(t){e.$set(e.form,"expiredDate",t)},expression:"form.expiredDate"}},[s("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[s("q-card",{staticClass:"row q-pa-md",staticStyle:{"min-width":"300px","border-radius":"8px"}},[s("div",{staticClass:"row col-6 q-px-xs"},[s("div",{staticClass:"col-12"},[e._v("Month")]),s("q-select",{staticClass:"col-12",attrs:{dense:"",options:e.months,outlined:"","emit-value":"","map-options":""},model:{value:e.month,callback:function(t){e.month=t},expression:"month"}})],1),s("div",{staticClass:"row col-6 q-px-xs"},[s("div",{staticClass:"col-12"},[e._v("Year")]),s("q-select",{staticClass:"col-12",attrs:{dense:"",options:e.years,outlined:"","emit-value":"","map-options":""},model:{value:e.year,callback:function(t){e.year=t},expression:"year"}})],1),s("div",{staticClass:"col-12 row justify-end q-pt-md q-pr-sm"},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",color:"primary",label:"OK"},on:{click:e.changeExpiredDate}})],1)])],1)],1)],1),s("div",{staticClass:"col-5 row q-pt-md"},[s("div",{staticClass:"col-12 q-pb-sm"},[e._v("Security code")]),s("q-input",{staticClass:"col-12",attrs:{dense:"","bg-color":"grey-3",placeholder:"123",outlined:"",mask:"###",error:e.$v.form.securityCode.$error},on:{blur:function(t){return e.$v.form.securityCode.$touch()}},model:{value:e.form.securityCode,callback:function(t){e.$set(e.form,"securityCode",t)},expression:"form.securityCode"}})],1)]),s("div",{staticClass:"col-12 row q-pt-md"},[s("div",{staticClass:"col-12 q-pb-sm"},[e._v("Zip / Postal code")]),s("q-input",{staticClass:"col-12",attrs:{dense:"","bg-color":"grey-3",placeholder:"12345",outlined:"",error:e.$v.form.postalCode.$error},on:{blur:function(t){return e.$v.form.postalCode.$touch()}},model:{value:e.form.postalCode,callback:function(t){e.$set(e.form,"postalCode",t)},expression:"form.postalCode"}})],1),s("div",{staticClass:"col-12 row justify-center q-pt-lg"},[s("q-btn",{attrs:{dense:"",color:"primary",icon:"add",round:"",size:"xl"},on:{click:e.save}})],1)])])},o=[],r=(s("ddb0"),s("5319"),s("9424")),i=s("b5ae");const l=e=>{if(!e)return!1;console.log(e,"value2");const[t,s]=e.split("/"),a="20"+s,o=new Date,r=o.getMonth()+1,i=o.getFullYear();return parseInt(a)>=i&&(parseInt(a)>i||parseInt(t)>=r)};var c={mixins:[r["a"]],data(){return{form:{name:null,cardNumber:null,expiredDate:null,securityCode:null,postalCode:null},route:"cards",month:null,year:null}},computed:{spacedCardNumber(){return this.form.cardNumber?this.form.cardNumber.replace(/\s/g,"").replace(/(\d{4})/g,"$1 "):""},months(){const e=[{label:"Enero",value:"01"},{label:"Febrero",value:"02"},{label:"Marzo",value:"03"},{label:"Abril",value:"04"},{label:"Mayo",value:"05"},{label:"Junio",value:"06"},{label:"Julio",value:"07"},{label:"Agosto",value:"08"},{label:"Septiembre",value:"09"},{label:"Octubre",value:"10"},{label:"Noviembre",value:"11"},{label:"Diciembre",value:"12"}];return e},years(){const e=[],t=(new Date).getFullYear();for(let s=t;s<=t+78;s++)e.push({value:s,label:s});return e}},methods:{changeExpiredDate(){const e=this.month,t=this.year.toString().substr(2);this.form.expiredDate=`${e}/${t}`},afterSave(){this.$router.push("/success?message=You successfully added a card!")}},validations:{form:{name:{required:i["required"]},cardNumber:{required:i["required"]},expiredDate:{validateDateCV:l},securityCode:{required:i["required"]},postalCode:{required:i["required"]}}}},n=c,d=(s("c4d9"),s("2877")),u=s("9989"),p=s("9c40"),f=s("2c91"),m=s("f09f"),h=s("27f9"),v=s("7cbe"),b=s("ddd8"),C=s("7f67"),y=s("eebe"),g=s.n(y),q=Object(d["a"])(n,a,o,!1,null,"4eca6ee3",null);t["default"]=q.exports;g()(q,"components",{QPage:u["a"],QBtn:p["a"],QSpace:f["a"],QCard:m["a"],QInput:h["a"],QPopupProxy:v["a"],QSelect:b["a"]}),g()(q,"directives",{ClosePopup:C["a"]})},6259:function(e,t,s){},9424:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var a=s("f508");const o={data(){return{insert:!0}},async mounted(){"function"===typeof this.beforeMounted&&this.beforeMounted(),console.log(this.id,"id"),this.id&&(await this.getRecord(),this.insert=!1),"function"===typeof this.afterMounted&&this.afterMounted()},methods:{async getRecord(){a["a"].show(),await this.$api.get(`${this.route}/${this.id}`).then((e=>{this.form=e,"function"===typeof this.afterGetRecord&&this.afterGetRecord(e),a["a"].hide()}))},save(){if("function"===typeof this.beforeValidate&&this.beforeValidate(),this.$v.form.$touch(),"function"===typeof this.afterValidate&&this.afterValidate(),console.log("save",this.$v.form,this.form,"form"),!this.$v.form.$error)if(this.$q.loading.show(),"function"===typeof this.beforeSave&&this.beforeSave(),this.insert)if(this.formData){const e=new FormData;for(const t in this.form)e.append(t,this.form[t]);console.log(e,"formData"),this.$api.post(this.route,e,{headers:{"Content-Type":"multipart/form-data"}}).then((e=>{this.$q.loading.hide(),e&&("function"===typeof this.afterSave&&this.afterSave(e),this.stayAfterSave&&this.$router.go(-1))}))}else this.$api.post(this.route,this.form).then((e=>{this.$q.loading.hide(),e&&("function"===typeof this.afterSave&&this.afterSave(e),this.stayAfterSave&&this.$router.go(-1))}));else this.$api.put(`${this.route}/${this.id}`,this.form).then((e=>{this.$q.loading.hide(),e&&("function"===typeof this.afterSave&&this.afterSave(e),this.$q.notify({type:"positive",message:"registry modified successfully"}),this.stayAfterSave&&this.$router.go(-1))}))}},created(){}}},c4d9:function(e,t,s){"use strict";s("6259")}}]);